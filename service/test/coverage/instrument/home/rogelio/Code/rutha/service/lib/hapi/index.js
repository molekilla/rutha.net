
var __cov_$BhUy2dEz5ZLYazno6mUEw = (Function('return this'))();
if (!__cov_$BhUy2dEz5ZLYazno6mUEw.__coverage__) { __cov_$BhUy2dEz5ZLYazno6mUEw.__coverage__ = {}; }
__cov_$BhUy2dEz5ZLYazno6mUEw = __cov_$BhUy2dEz5ZLYazno6mUEw.__coverage__;
if (!(__cov_$BhUy2dEz5ZLYazno6mUEw['/home/rogelio/Code/rutha/service/lib/hapi/index.js'])) {
   __cov_$BhUy2dEz5ZLYazno6mUEw['/home/rogelio/Code/rutha/service/lib/hapi/index.js'] = {"path":"/home/rogelio/Code/rutha/service/lib/hapi/index.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":47,"loc":{"start":{"line":47,"column":56},"end":{"line":47,"column":70}}},"2":{"name":"(anonymous_2)","line":50,"loc":{"start":{"line":50,"column":20},"end":{"line":50,"column":46}}},"3":{"name":"(anonymous_3)","line":71,"loc":{"start":{"line":71,"column":15},"end":{"line":71,"column":36}}},"4":{"name":"(anonymous_4)","line":83,"loc":{"start":{"line":83,"column":6},"end":{"line":83,"column":17}}},"5":{"name":"(anonymous_5)","line":85,"loc":{"start":{"line":85,"column":19},"end":{"line":85,"column":31}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":1,"column":27}},"2":{"start":{"line":2,"column":0},"end":{"line":2,"column":41}},"3":{"start":{"line":3,"column":0},"end":{"line":3,"column":40}},"4":{"start":{"line":4,"column":0},"end":{"line":8,"column":3}},"5":{"start":{"line":10,"column":0},"end":{"line":12,"column":3}},"6":{"start":{"line":14,"column":0},"end":{"line":18,"column":3}},"7":{"start":{"line":21,"column":0},"end":{"line":21,"column":108}},"8":{"start":{"line":24,"column":0},"end":{"line":28,"column":2}},"9":{"start":{"line":30,"column":0},"end":{"line":30,"column":51}},"10":{"start":{"line":33,"column":0},"end":{"line":44,"column":2}},"11":{"start":{"line":47,"column":0},"end":{"line":91,"column":3}},"12":{"start":{"line":49,"column":2},"end":{"line":64,"column":5}},"13":{"start":{"line":52,"column":8},"end":{"line":52,"column":28}},"14":{"start":{"line":53,"column":8},"end":{"line":53,"column":43}},"15":{"start":{"line":54,"column":8},"end":{"line":54,"column":23}},"16":{"start":{"line":56,"column":8},"end":{"line":61,"column":9}},"17":{"start":{"line":57,"column":10},"end":{"line":57,"column":25}},"18":{"start":{"line":59,"column":10},"end":{"line":59,"column":29}},"19":{"start":{"line":60,"column":10},"end":{"line":60,"column":42}},"20":{"start":{"line":62,"column":8},"end":{"line":62,"column":51}},"21":{"start":{"line":67,"column":2},"end":{"line":75,"column":5}},"22":{"start":{"line":72,"column":8},"end":{"line":72,"column":20}},"23":{"start":{"line":78,"column":2},"end":{"line":89,"column":5}},"24":{"start":{"line":84,"column":4},"end":{"line":88,"column":5}},"25":{"start":{"line":85,"column":6},"end":{"line":87,"column":9}},"26":{"start":{"line":86,"column":8},"end":{"line":86,"column":66}}},"branchMap":{"1":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":56,"column":8}},{"start":{"line":56,"column":8},"end":{"line":56,"column":8}}]},"2":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]}}};
}
__cov_$BhUy2dEz5ZLYazno6mUEw = __cov_$BhUy2dEz5ZLYazno6mUEw['/home/rogelio/Code/rutha/service/lib/hapi/index.js'];
__cov_$BhUy2dEz5ZLYazno6mUEw.s['1']++;var Hapi=require('hapi');__cov_$BhUy2dEz5ZLYazno6mUEw.s['2']++;var debug=require('debug')('api:main');__cov_$BhUy2dEz5ZLYazno6mUEw.s['3']++;var RuthaUtils=require('rutha-utils');__cov_$BhUy2dEz5ZLYazno6mUEw.s['4']++;var config=RuthaUtils.createConfig({path:{config:__dirname+'/../../config'}});__cov_$BhUy2dEz5ZLYazno6mUEw.s['5']++;var logger=RuthaUtils.createLogger({filename:config.get('logger:filename')});__cov_$BhUy2dEz5ZLYazno6mUEw.s['6']++;var mongooseClient=RuthaUtils.createModels({client:'mongoose',connectionString:config.get('mongodb:connectionString'),models:__dirname+'/../models'});__cov_$BhUy2dEz5ZLYazno6mUEw.s['7']++;var server=module.exports=Hapi.createServer(config.get('apiServer:host'),config.get('apiServer:port'));__cov_$BhUy2dEz5ZLYazno6mUEw.s['8']++;server.pack.app={mongoose:mongooseClient.client,config:config,logger:logger};__cov_$BhUy2dEz5ZLYazno6mUEw.s['9']++;debug('Set mongoose, config, logger dependencies');__cov_$BhUy2dEz5ZLYazno6mUEw.s['10']++;var controllers=[{plugin:require('lout'),options:{endpoint:'/api/docs'}},{plugin:require('../controllers/users/index')}];__cov_$BhUy2dEz5ZLYazno6mUEw.s['11']++;server.pack.register(require('hapi-auth-bearer-token'),function(err){__cov_$BhUy2dEz5ZLYazno6mUEw.f['1']++;__cov_$BhUy2dEz5ZLYazno6mUEw.s['12']++;server.auth.strategy('token','bearer-access-token',{validateFunc:function(token,callback){__cov_$BhUy2dEz5ZLYazno6mUEw.f['2']++;__cov_$BhUy2dEz5ZLYazno6mUEw.s['13']++;var matched=false;__cov_$BhUy2dEz5ZLYazno6mUEw.s['14']++;var tokenResult={token:token};__cov_$BhUy2dEz5ZLYazno6mUEw.s['15']++;var err=null;__cov_$BhUy2dEz5ZLYazno6mUEw.s['16']++;if(token==='a1b2c3'){__cov_$BhUy2dEz5ZLYazno6mUEw.b['1'][0]++;__cov_$BhUy2dEz5ZLYazno6mUEw.s['17']++;matched=true;}else{__cov_$BhUy2dEz5ZLYazno6mUEw.b['1'][1]++;__cov_$BhUy2dEz5ZLYazno6mUEw.s['18']++;tokenResult=null;__cov_$BhUy2dEz5ZLYazno6mUEw.s['19']++;err={error:'Unauthorized'};}__cov_$BhUy2dEz5ZLYazno6mUEw.s['20']++;return callback(err,matched,tokenResult);}});__cov_$BhUy2dEz5ZLYazno6mUEw.s['21']++;server.route({method:'GET',path:'/api/health',config:{handler:function(req,reply){__cov_$BhUy2dEz5ZLYazno6mUEw.f['3']++;__cov_$BhUy2dEz5ZLYazno6mUEw.s['22']++;reply('OK');}}});__cov_$BhUy2dEz5ZLYazno6mUEw.s['23']++;server.pack.register(controllers,{route:{prefix:'/api'}},function(){__cov_$BhUy2dEz5ZLYazno6mUEw.f['4']++;__cov_$BhUy2dEz5ZLYazno6mUEw.s['24']++;if(!module.parent){__cov_$BhUy2dEz5ZLYazno6mUEw.b['2'][0]++;__cov_$BhUy2dEz5ZLYazno6mUEw.s['25']++;server.start(function(){__cov_$BhUy2dEz5ZLYazno6mUEw.f['5']++;__cov_$BhUy2dEz5ZLYazno6mUEw.s['26']++;console.log('Server started at port '+server.info.port);});}else{__cov_$BhUy2dEz5ZLYazno6mUEw.b['2'][1]++;}});});
